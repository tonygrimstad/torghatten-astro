---
import { useTranslations } from "../utils/useTranslations";

const { lang = "no" } = Astro.props;
const { t, getRaw } = useTranslations(Astro.url);

interface Run {
  key: string;
  name: string;
  desc: string;
  url: string;
  logo: string; // filnavn under /public/images/logos/
  alt: string;
}

const runs = (getRaw("helgelandslopene.runs") as Run[]) ?? [];
---

<!-- Hero banner - kun bilde -->
<section class="relative isolate">
  <div class="w-full bg-slate-100">
    <img
      src="/images/Banner_HL_2025.png"
      alt={t("helgelandslopene.bannerAlt")}
      class="w-full h-auto max-w-none"
      loading="eager"
      decoding="async"
    />
  </div>
</section>

<!-- Tittel og intro - under banner -->
<section class="bg-linear-to-b from-slate-50 to-white py-12">
  <div class="mx-auto max-w-5xl px-6">
    <div class="text-center mb-8">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6">
        {t("helgelandslopene.title")}
      </h1>
      <div class="bg-white border border-gray-200 rounded-xl p-8 shadow-sm">
        <p class="text-lg text-gray-800 leading-relaxed max-w-4xl mx-auto">
          {t("helgelandslopene.lead")}
        </p>
      </div>
    </div>
  </div>
</section>

<!-- Løpenes innhold -->
<main class="bg-gray-50 py-12">
  <div class="mx-auto max-w-5xl px-6">
    <!-- Løpene seksjon -->
    <section>
      <div class="bg-white border border-gray-200 rounded-xl p-8 shadow-sm">
        <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">
          {t("helgelandslopene.sections.races.title", "Løpene")}
        </h2>
        <ul class="grid md:grid-cols-2 gap-8">
          {
            runs.map((r: Run) => {
              const logoSrc = encodeURI(`/images/logos/${r.logo}`);
              return (
                <li>
                  <a
                    href={r.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="group block rounded-xl border-2 border-gray-200 bg-white p-6 shadow-sm transition
                         hover:border-blue-600 hover:shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-600/60 focus-visible:border-blue-600"
                  >
                    <div class="flex gap-4 items-start">
                      <img
                        src={logoSrc}
                        alt={r.alt}
                        class="w-20 h-20 object-contain mt-1 shrink-0"
                        loading="lazy"
                        decoding="async"
                      />
                      <div>
                        <h3 class="text-xl font-bold text-gray-900 group-hover:text-blue-600 group-hover:underline mb-3 transition-colors">
                          {r.name}
                        </h3>
                        <p class="text-gray-700 leading-relaxed font-medium">
                          {r.desc}
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
              );
            })
          }
        </ul>
      </div>
    </section>
  </div>
</main>
