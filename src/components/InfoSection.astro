---
import { useTranslations } from "../utils/useTranslations.ts";

const { t } = useTranslations(Astro.url);

// Generate unique IDs for accessibility
const componentId = `info-section-${Math.random().toString(36).substr(2, 9)}`;
const headingId = `${componentId}-main-heading`;
---

<section
  role="region"
  aria-labelledby={headingId}
  class="bg-white/90 text-gray-900 py-12 px-6 rounded-lg shadow-lg max-w-5xl mx-auto my-12 border border-gray-200"
>
  <h2 id={headingId} class="text-3xl font-bold text-center mb-8 text-gray-900">
    <span role="img" aria-label={t("info.icon") || "informasjon"}>‚ÑπÔ∏è</span>
    {t("info.title") || "Informasjon"}
  </h2>

  <div class="space-y-8 text-sm md:text-base leading-relaxed">
    <!-- Generelt -->
    <div role="region" aria-labelledby={`${componentId}-general-heading`}>
      <h3
        id={`${componentId}-general-heading`}
        class="text-xl font-semibold mb-3 text-gray-800 flex items-center gap-2"
      >
        <span role="img" aria-label={t("info.general.icon") || "plassering"}
          >üìç</span
        >
        {t("info.general.title") || "Generelt"}
      </h3>
      <p class="text-gray-700">
        {
          t("info.general.description") || (
            <>
              Alle l√∏p starter p√•{" "}
              <strong class="text-gray-900">
                Nordhus stadion / Nordhus Krets Samfunnshus
              </strong>
              .
            </>
          )
        }
      </p>
    </div>

    <!-- Startnummer -->
    <div role="region" aria-labelledby={`${componentId}-bib-heading`}>
      <h3
        id={`${componentId}-bib-heading`}
        class="text-xl font-semibold mb-3 text-gray-800 flex items-center gap-2"
      >
        <span role="img" aria-label={t("info.bib.icon") || "startnummer"}
          >üé´</span
        >
        {t("info.bib.title") || "Startnummer og tidbrikker"}
      </h3>
      <div class="text-gray-700 space-y-2">
        <p>
          {
            t("info.bib.description") ||
              "Henting skjer p√• Nordhus skole (NKS). Du f√•r en SMS med ditt startnummer fredag."
          }
        </p>
        <div>
          <p class="font-medium mb-2">
            {t("info.bib.pickupTitle") || "Henting:"}
          </p>
          <ul
            class="list-disc list-inside ml-4 space-y-1"
            role="list"
            aria-label={t("info.bib.pickupTimes") ||
              "Hentetider for startnummer"}
          >
            <li role="listitem">
              <span class="font-medium"
                >{t("info.bib.friday") || "Fredag:"}</span
              >
              {t("info.bib.fridayTime") || "kl. 17:00‚Äì20:00"}
            </li>
            <li role="listitem">
              <span class="font-medium"
                >{t("info.bib.saturday") || "L√∏rdag:"}</span
              >
              {t("info.bib.saturdayTime") || "fra kl. 09:00"}
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Startnummer-farger -->
    <div role="region" aria-labelledby={`${componentId}-colors-heading`}>
      <h3
        id={`${componentId}-colors-heading`}
        class="text-xl font-semibold mb-3 text-gray-800 flex items-center gap-2"
      >
        <span role="img" aria-label={t("info.colors.icon") || "farger"}>üé®</span
        >
        {t("info.colors.title") || "Startnummer-farger"}
      </h3>
      <ul
        class="space-y-2 ml-4"
        role="list"
        aria-label={t("info.colors.description") ||
          "Fargesystem for startnummer"}
      >
        <li
          role="listitem"
          class="flex items-center gap-3 p-2 bg-blue-50 rounded-md border-l-4 border-blue-500"
        >
          <span
            class="w-4 h-4 bg-blue-500 rounded-full border border-blue-600"
            aria-label={t("info.colors.blue") || "bl√• farge"}></span>
          <span class="font-semibold text-blue-800" aria-label="bl√• kategori">
            {t("info.colors.blueLabel") || "Bl√•:"}
          </span>
          <span class="text-gray-700">
            {t("info.colors.blueRaces") || "Hel- og Halvmaraton"}
          </span>
        </li>
        <li
          role="listitem"
          class="flex items-center gap-3 p-2 bg-red-50 rounded-md border-l-4 border-red-500"
        >
          <span
            class="w-4 h-4 bg-red-500 rounded-full border border-red-600"
            aria-label={t("info.colors.red") || "r√∏d farge"}></span>
          <span class="font-semibold text-red-800" aria-label="r√∏d kategori">
            {t("info.colors.redLabel") || "R√∏d:"}
          </span>
          <span class="text-gray-700">
            {t("info.colors.redRaces") || "√òygaloppen (10 000 m)"}
          </span>
        </li>
        <li
          role="listitem"
          class="flex items-center gap-3 p-2 bg-green-50 rounded-md border-l-4 border-green-600"
        >
          <span
            class="w-4 h-4 bg-green-600 rounded-full border border-green-700"
            aria-label={t("info.colors.green") || "gr√∏nn farge"}></span>
          <span
            class="font-semibold text-green-800"
            aria-label="gr√∏nn kategori"
          >
            {t("info.colors.greenLabel") || "Gr√∏nn:"}
          </span>
          <span class="text-gray-700">
            {t("info.colors.greenRaces") || "Minimaraton og Trim"}
          </span>
        </li>
        <li
          role="listitem"
          class="flex items-center gap-3 p-2 bg-yellow-50 rounded-md border-l-4 border-yellow-600"
        >
          <span
            class="w-4 h-4 bg-yellow-500 rounded-full border border-yellow-600"
            aria-label={t("info.colors.yellow") || "gul farge"}></span>
          <span class="font-semibold text-yellow-800" aria-label="gul kategori">
            {t("info.colors.yellowLabel") || "Gul:"}
          </span>
          <span class="text-gray-700">
            {t("info.colors.yellowRaces") || "Barnel√∏p/Paral√∏p"}
          </span>
        </li>
      </ul>
    </div>

    <!-- Garderobe -->
    <div role="region" aria-labelledby={`${componentId}-facilities-heading`}>
      <h3
        id={`${componentId}-facilities-heading`}
        class="text-xl font-semibold mb-3 text-gray-800 flex items-center gap-2"
      >
        <span role="img" aria-label={t("info.facilities.icon") || "fasiliteter"}
          >üöø</span
        >
        {t("info.facilities.title") || "Garderober, toalett og dusj"}
      </h3>
      <p class="text-gray-700">
        {
          t("info.facilities.description") ||
            "Garderober med dusj og toalett finnes p√• NKS ved start-/m√•lomr√•det. T√∏y/verdisaker kan oppbevares i sekretariatet."
        }
      </p>
    </div>

    <!-- Drikkestasjoner -->
    <div role="region" aria-labelledby={`${componentId}-drinks-heading`}>
      <h3
        id={`${componentId}-drinks-heading`}
        class="text-xl font-semibold mb-3 text-gray-800 flex items-center gap-2"
      >
        <span role="img" aria-label={t("info.drinks.icon") || "drikkestasjoner"}
          >ü•§</span
        >
        {t("info.drinks.title") || "Drikkestasjoner"}
      </h3>
      <div class="text-gray-700 space-y-2">
        <p>
          {
            t("info.drinks.frequency") ||
              "Hver ~5. km for hel- og halvmaraton. Vann, sportsdrikk og banan."
          }
        </p>
        <p class="text-sm text-gray-600">
          {t("info.drinks.volunteers") || "Betjenes av lokale frivillige."}
        </p>
      </div>
    </div>

    <!-- Sikkerhet -->
    <div role="region" aria-labelledby={`${componentId}-safety-heading`}>
      <h3
        id={`${componentId}-safety-heading`}
        class="text-xl font-semibold mb-3 text-gray-800 flex items-center gap-2"
      >
        <span role="img" aria-label={t("info.safety.icon") || "sikkerhet"}
          >‚õëÔ∏è</span
        >
        {t("info.safety.title") || "Sikkerhet"}
      </h3>
      <p class="text-gray-700">
        {
          t("info.safety.description") || (
            <>
              Vi samarbeider med{" "}
              <strong class="text-gray-900">R√∏de Kors</strong> for din
              sikkerhet.
            </>
          )
        }
      </p>
    </div>

    <!-- Premiering -->
    <div role="region" aria-labelledby={`${componentId}-awards-heading`}>
      <h3
        id={`${componentId}-awards-heading`}
        class="text-xl font-semibold mb-3 text-gray-800 flex items-center gap-2"
      >
        <span role="img" aria-label={t("info.awards.icon") || "premiering"}
          >üèÖ</span
        >
        {t("info.awards.title") || "Premiering"}
      </h3>
      <ul
        class="space-y-2 ml-4"
        role="list"
        aria-label={t("info.awards.description") || "Informasjon om premiering"}
      >
        <li role="listitem" class="flex items-start gap-2">
          <span
            class="w-2 h-2 bg-gray-400 rounded-full mt-2 shrink-0"
            aria-hidden="true"></span>
          <span class="text-gray-700">
            {t("info.awards.medal") || "Medalje til alle som fullf√∏rer"}
          </span>
        </li>
        <li role="listitem" class="flex items-start gap-2">
          <span
            class="w-2 h-2 bg-gray-400 rounded-full mt-2 shrink-0"
            aria-hidden="true"></span>
          <span class="text-gray-700">
            {t("info.awards.prizes") || "Premie til klassevinnere og topp 3"}
          </span>
        </li>
        <li role="listitem" class="flex items-start gap-2">
          <span
            class="w-2 h-2 bg-gray-400 rounded-full mt-2 shrink-0"
            aria-hidden="true"></span>
          <span class="text-gray-700">
            {
              t("info.awards.ceremony") ||
                "Premieutdeling p√• stadion ~kl. 15:00"
            }
          </span>
        </li>
        <li role="listitem" class="flex items-start gap-2">
          <span
            class="w-2 h-2 bg-gray-400 rounded-full mt-2 shrink-0"
            aria-hidden="true"></span>
          <span class="text-gray-700 font-medium">
            {t("info.awards.waitForAll") || "Vi venter til alle er i m√•l!"}
          </span>
        </li>
      </ul>
    </div>
  </div>
</section>

<style>
  /* Enhanced focus styles for accessibility */
  h2:focus,
  h3:focus {
    outline: 3px solid #3b82f6;
    outline-offset: 2px;
    background-color: rgba(59, 130, 246, 0.1);
    border-radius: 4px;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .border-l-4 {
      border-left-width: 6px;
    }

    .bg-blue-50,
    .bg-red-50,
    .bg-green-50,
    .bg-yellow-50 {
      border: 1px solid currentColor;
    }

    .text-blue-800,
    .text-red-800,
    .text-green-800,
    .text-yellow-800 {
      font-weight: bold;
      text-decoration: underline;
    }
  }

  /* Better spacing for screen readers */
  [role="listitem"] {
    scroll-margin-top: 4rem;
  }

  /* Ensure emoji spacing doesn't break layout */
  [role="img"] {
    display: inline-block;
    flex-shrink: 0;
  }
</style>
