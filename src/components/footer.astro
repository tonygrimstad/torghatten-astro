---
import { useTranslations } from "../utils/useTranslations.ts";
import { siteMeta } from "../config/siteConfig.ts";

const { t, currentLang } = useTranslations(Astro.url);
const path = Astro.url.pathname;
const restPath = path.split("/").slice(2).join("/");
const otherLang = currentLang === "no" ? "en" : "no";
const switchUrl = `/${otherLang}/${restPath}`;
const year = new Date().getFullYear();
const { phone } = siteMeta;
---

<footer class="bg-black/80 text-yellow-400 py-10 px-6 mt-16 text-sm">
  <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8">
    <!-- Kontaktinfo -->
    <div>
      <h3 class="text-lg font-semibold mb-2">ğŸ“¬ {t("footer.contact")}</h3>
      <p>{t("footer.siteName")}</p>
      <p>
        <a
          href={`mailto:${t("footer.email")}`}
          class="underline hover:text-yellow-300"
        >
          {t("footer.email")}
        </a>
      </p>
      {
        phone && (
          <p>
            {t("footer.phone")}
            {phone}
          </p>
        )
      }
    </div>

    <!-- Om arrangementet -->
    <div class="md:col-span-2">
      <h3 class="text-lg font-semibold mb-2">ğŸƒâ€â™€ï¸ {t("footer.event")}</h3>
      <p class="italic text-gray-300">
        {t("footer.description")}<br /><br />
        {t("footer.organizer")}:
        <a
          href={t("footer.orgUrl")}
          target="_blank"
          class="underline hover:text-yellow-300"
        >
          {t("footer.organizedBy")}
        </a>
      </p>
    </div>

    <!-- SprÃ¥kvalg -->
    <div>
      <h3 class="text-lg font-semibold mb-2">ğŸŒ {t("footer.language")}</h3>
      <div class="flex space-x-4">
        <a href={switchUrl} class="hover:text-yellow-300">
          {currentLang === "no" ? t("footer.english") : t("footer.norwegian")}
        </a>
      </div>
    </div>
  </div>

  <!-- Nederste rad -->
  <div
    class="mt-10 border-t border-gray-700 pt-4 text-center text-xs text-gray-400"
  >
    Â© 2014â€“{year}
    {t("footer.siteName")} â€¢ {t("footer.poweredBy")}
  </div>
</footer>
